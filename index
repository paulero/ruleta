<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ruleta de Premios</title>
    <style>
        body { display: flex; flex-direction: column; align-items: center; justify-content: center; height: 100vh; margin: 0; background: #f0f2f5; font-family: sans-serif; }
        .canvas-container { position: relative; }
        canvas { border-radius: 50%; box-shadow: 0 0 20px rgba(0,0,0,0.2); }
        #btn-girar { margin-top: 20px; padding: 15px 30px; font-size: 1.2rem; cursor: pointer; background: #2ecc71; color: white; border: none; border-radius: 50px; transition: 0.3s; }
        #btn-girar:hover { background: #27ae60; transform: scale(1.05); }
        .flecha { position: absolute; top: -10px; left: 50%; transform: translateX(-50%); width: 0; height: 0; border-left: 20px solid transparent; border-right: 20px solid transparent; border-top: 40px solid #e74c3c; z-index: 10; }
    </style>
</head>
<body>

    <div class="canvas-container">
        <div class="flecha"></div>
        <canvas id="ruleta" width="400" height="400"></canvas>
    </div>
    <button id="btn-girar">Â¡Girar Ruleta!</button>

    <script>
        const canvas = document.getElementById('ruleta');
        const ctx = canvas.getContext('2d');
        const btnGirar = document.getElementById('btn-girar');
        
        const opciones = ["ðŸŽ¬ PelÃ­cula", "ðŸ½ï¸ Cena", "ðŸŒ³ Actividad", "ðŸ‡µðŸ‡ª Viaje Nac.", "âœˆï¸ Viaje Inter."];
        const colores = ["#3498db", "#9b59b6", "#e67e22", "#f1c40f", "#1abc9c"];
        
        let anguloActual = 0;
        let girando = false;

        function dibujarRuleta() {
            const radio = canvas.width / 2;
            const arco = Math.PI * 2 / opciones.length;

            opciones.forEach((texto, i) => {
                const angulo = anguloActual + i * arco;
                ctx.fillStyle = colores[i];
                ctx.beginPath();
                ctx.moveTo(radio, radio);
                ctx.arc(radio, radio, radio, angulo, angulo + arco);
                ctx.fill();

                // Texto
                ctx.save();
                ctx.translate(radio, radio);
                ctx.rotate(angulo + arco / 2);
                ctx.textAlign = "right";
                ctx.fillStyle = "white";
                ctx.font = "bold 18px Arial";
                ctx.fillText(texto, radio - 20, 10);
                ctx.restore();
            });
        }

        function girar() {
            if (girando) return;
            girando = true;
            
            const extraGiro = Math.random() * 360 + 1440; // Al menos 4 vueltas
            const tiempoTotal = 4000; // 4 segundos
            let inicio = null;

            function animacion(timestamp) {
                if (!inicio) inicio = timestamp;
                const progreso = timestamp - inicio;
                const easeOut = 1 - Math.pow(1 - (progreso / tiempoTotal), 3); // DesaceleraciÃ³n
                
                anguloActual = (easeOut * (extraGiro * Math.PI / 180));
                dibujarRuleta();

                if (progreso < tiempoTotal) {
                    requestAnimationFrame(animacion);
                } else {
                    girando = false;
                }
            }
            requestAnimationFrame(animacion);
        }

        btnGirar.addEventListener('click', girar);
        dibujarRuleta();
    </script>
</body>
</html>
